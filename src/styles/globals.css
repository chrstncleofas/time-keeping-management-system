@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-gray-200;
  }
  
  :root {
    --primary-color: #2563eb;
    --accent-color: #7c3aed;
    --sidebar-bg: #0f1724;
    --sidebar-text: #e6eef8;
    --sidebar-active-bg: #2563eb;
    --sidebar-hover-bg: #0b1220;
    --button-bg: #7c3aed;
    --button-text: #ffffff;
    --header-bg: #ffffff;
    --header-text: #111827;
    --auth-card-bg: #0b1220;
    --card-bg: #ffffff;
    --success-color: #16a34a;
    --danger-color: #dc2626;
    --warning-color: #f59e0b;
    --info-color: var(--primary-color);
  }

  body {
    background-color: var(--header-bg);
    color: var(--header-text);
  }

  /* Safe-area helpers for iOS notch and rounded devices */
  :root {
    --safe-area-inset-top: env(safe-area-inset-top);
    --safe-area-inset-right: env(safe-area-inset-right);
    --safe-area-inset-bottom: env(safe-area-inset-bottom);
    --safe-area-inset-left: env(safe-area-inset-left);
  }

  /* Ensure body does not overlap device notches on iOS when using viewport-fit=cover */
  body {
    padding-bottom: calc(var(--safe-area-inset-bottom, 0px));
    padding-left: calc(var(--safe-area-inset-left, 0px));
    padding-right: calc(var(--safe-area-inset-right, 0px));
  }

  /* Gradient text utility */
  .text-gradient {
    @apply bg-gradient-ibaytech bg-clip-text text-transparent;
  }

  /* Dark gradient background */
  .bg-dark-gradient {
    background: linear-gradient(135deg, rgba(0,0,0,0.06) 0%, rgba(0,0,0,0.12) 50%, rgba(0,0,0,0.06) 100%);
  }

  /* Fix input text color - ensure it's visible */
  input, 
  textarea, 
  select {
    @apply text-gray-900;
  }

  input::placeholder,
  textarea::placeholder {
    @apply text-gray-400;
  }

  /* Disabled inputs */
  input:disabled,
  textarea:disabled,
  select:disabled {
    @apply bg-gray-100 text-gray-500 cursor-not-allowed;
  }
}

@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .animate-slide-in {
    animation: slideIn 0.3s ease-out;
  }

  @keyframes slideIn {
    from {
      transform: translateX(100%);
    }
    to {
      transform: translateX(0);
    }
  }
  
  /* Button variants */
  .btn-primary {
    @apply px-4 py-2 font-medium rounded-lg transition-colors;
    background-color: var(--button-bg);
    color: var(--button-text);
  }

  /* Map common Tailwind color utilities to CSS variables so saved settings apply globally */
  .bg-blue-600 { background-color: var(--primary-color) !important; }
  .hover\:bg-blue-700:hover { background-color: var(--primary-color-dark) !important; }
  .text-primary-600, .text-primary-700 { color: var(--primary-color) !important; }

  /* Border utilities for primary */
  .border-blue-600, .border-primary-600 { border-color: var(--primary-color) !important; }

  /* Light primary background (used for badges/tags) */
  .bg-primary-50 { background-color: color-mix(in srgb, var(--primary-color) 6%, white) !important; }
  .bg-blue-50 { background-color: color-mix(in srgb, var(--primary-color) 6%, white) !important; }

  /* Success / danger / warning light backgrounds used for badges and alerts */
  .bg-green-50, .bg-green-100 { background-color: color-mix(in srgb, var(--success-color) 8%, white) !important; }
  .bg-red-50, .bg-red-100 { background-color: color-mix(in srgb, var(--danger-color) 8%, white) !important; }
  .bg-yellow-50, .bg-orange-50 { background-color: color-mix(in srgb, var(--warning-color) 8%, white) !important; }
  .bg-blue-100 { background-color: color-mix(in srgb, var(--primary-color) 10%, white) !important; }
  .bg-red-500 { background-color: var(--danger-color) !important; }

  /* Text color mappings for semantic utilities */
  .text-blue-600, .text-blue-700 { color: var(--primary-color) !important; }
  .text-green-600 { color: var(--success-color) !important; }
  .text-red-600, .text-red-700 { color: var(--danger-color) !important; }
  .text-yellow-700, .text-orange-700 { color: var(--warning-color) !important; }

  /* Border light variants */
  .border-blue-200 { border-color: color-mix(in srgb, var(--primary-color) 12%, white) !important; }
  .border-green-200 { border-color: color-mix(in srgb, var(--success-color) 12%, white) !important; }
  .border-red-200 { border-color: color-mix(in srgb, var(--danger-color) 12%, white) !important; }

  /* Focus ring mapping for inputs/buttons */
  .focus\:ring-primary-500:focus { box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary-color) 20%, transparent) !important; }
  .focus\:ring-blue-500:focus { box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary-color) 20%, transparent) !important; }

  .bg-accent-500 { background-color: var(--accent-color) !important; }
  .hover\:bg-accent-600:hover { background-color: var(--accent-color-dark) !important; }

  .bg-green-600 { background-color: var(--success-color) !important; }
  .hover\:bg-green-700:hover { background-color: var(--success-color-dark) !important; }

  .bg-red-600 { background-color: var(--danger-color) !important; }
  .hover\:bg-red-700:hover { background-color: var(--danger-color-dark) !important; }

  /* Dark theme helper classes used across the app */
  .bg-dark-800 { background-color: var(--sidebar-bg) !important; }
  .bg-dark-700 { background-color: color-mix(in srgb, var(--sidebar-bg) 80%, rgba(255,255,255,0.02)) !important; }
  .border-dark-700 { border-color: rgba(255,255,255,0.04) !important; }
  .text-primary-500 { color: var(--primary-color) !important; }

  /* Make card backgrounds configurable via --card-bg */
  .bg-white { background-color: var(--card-bg) !important; }
  .bg-gray-50 { background-color: var(--header-bg) !important; }

  .btn-danger {
    @apply px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors disabled:bg-red-300 disabled:text-red-100 disabled:cursor-not-allowed;
  }

  .btn-secondary {
    @apply px-4 py-2 font-medium rounded-lg transition-colors;
    background-color: rgba(0,0,0,0.04);
    color: var(--header-text);
  }

  /* Hover text mappings so hover text color follows the primary theme color */
  .hover\:text-gray-300:hover,
  .hover\:text-gray-400:hover,
  .hover\:text-gray-500:hover,
  .hover\:text-gray-600:hover,
  .hover\:text-gray-900:hover,
  .hover\:text-gray-200:hover,
  .hover\:text-gray-700:hover,
  .hover\:text-primary-700:hover,
  .hover\:text-blue-700:hover {
    color: var(--primary-color) !important;
  }

  .btn-disabled {
    @apply px-4 py-2 bg-red-300 text-red-100 font-medium rounded-lg cursor-not-allowed;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Custom scrollbar for dark theme */
  .scrollbar-dark::-webkit-scrollbar {
    width: 8px;
  }
  
  .scrollbar-dark::-webkit-scrollbar-track {
    background-color: var(--sidebar-bg);
  }
  
  .scrollbar-dark::-webkit-scrollbar-thumb {
    background-color: rgba(255,255,255,0.08);
    border-radius: 9999px;
  }
  
  .scrollbar-dark::-webkit-scrollbar-thumb:hover {
    @apply bg-dark-500;
  }
}

/* Mobile compact overrides: reduce paddings, margins, gaps and headings for small screens
   This helps pages fit better on phones by scaling common Tailwind spacing utilities. */
@media (max-width: 640px) {
  /* Reduce common paddings */
  .p-6 { padding: 0.75rem !important; }
  .p-5 { padding: 0.625rem !important; }
  .p-4 { padding: 0.5rem !important; }
  .p-3 { padding: 0.375rem !important; }
  .px-4 { padding-left: 0.75rem !important; padding-right: 0.75rem !important; }
  .px-3 { padding-left: 0.5rem !important; padding-right: 0.5rem !important; }
  .py-2 { padding-top: 0.375rem !important; padding-bottom: 0.375rem !important; }

  /* Reduce margins and gaps */
  .mb-6 { margin-bottom: 0.75rem !important; }
  .mb-4 { margin-bottom: 0.5rem !important; }
  .mt-4 { margin-top: 0.5rem !important; }
  .gap-4 { gap: 0.5rem !important; }
  .gap-6 { gap: 0.75rem !important; }

  /* Reduce headline sizes */
  .text-3xl { font-size: 1.25rem !important; line-height: 1.3 !important; }
  .text-2xl { font-size: 1rem !important; line-height: 1.25 !important; }

  /* Make tables more compact */
  table th, table td { padding: 0.35rem 0.5rem !important; font-size: 0.85rem !important; }

  /* Reduce card radii slightly to save space */
  .rounded-xl { border-radius: 0.5rem !important; }

  /* Reduce modal inner padding if using p-6 */
  .p-6 .modal-inner, .modal.p-6 { padding: 0.75rem !important; }

  /* Smaller buttons */
  .px-4.py-2, .btn-primary, .btn-secondary { padding: 0.35rem 0.6rem !important; font-size: 0.9rem !important; }

  /* Make utility spacing classes slightly tighter */
  .space-y-6 > * + * { margin-top: 0.75rem !important; }
  .space-y-4 > * + * { margin-top: 0.5rem !important; }
}
